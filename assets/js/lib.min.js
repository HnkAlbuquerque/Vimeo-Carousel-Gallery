/*! Vimeo-Carousel-Gallery 2013-08-21 */
var Vimeo={init:function(a){this.container=a.container,this.fetch()},fetch:function(){var a=this,b=$('<div class="carousel-container cf"><span class="shadow shadow-left"></span><span class="prev controll"></span><div class="carousel-inner"><ul class="slider cf"></ul></div><span class="next controll"></span><span class="shadow shadow-right"></span></div>'),c=$('<div class="featured"></div>'),d=a.getId(data.main),e=data.videos;if(!d)throw new Error("The url of the video page is wrong or not defined");$(a.container).append(c).append(b),c.html(function(){var b=a.getId(data.main);return'<iframe src="http://player.vimeo.com/video/'+b+'" width="960" height="540" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'});for(var f=0,g=e.length;g>f;f+=1){var h=a.getId(e[f].url);$.getJSON("http://www.vimeo.com/api/v2/video/"+h+".json?callback=?",{format:"json"},function(a){var c=a[0].url,d=a[0].thumbnail_large,e=a[0].title;b.find(".slider").append('<li class="thumb"><a title="'+e+'" href="'+c+'"><img src="'+d+'" alt="'+e+'" title="'+e+'"></a></li>')})}$(window).load(function(){a.carousel()})},getId:function(a){var b=a.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);return b?b[3]:void 0},carousel:function(){var a=this,b=$(".slider"),c=$(".carousel-container .controll"),d=$(".featured"),e=b.find("li").length;if(e>3){var f=$(".slider li").outerWidth(!0);c.css({display:"block"}),b.css({left:"-"+f+"px"}),b.find("li:first").before(b.find("li:last")),$(document.body).on("click",".carousel-container .controll",function(){var a=$(this);if(a.hasClass("next")){var c=parseInt(b.css("left"))-f;$(".slider:not(:animated)").animate({left:c},500,function(){b.find("li:last").after(b.find("li:first")),b.css({left:"-"+f+"px"})})}else{var c=parseInt(b.css("left"))+f;$(".slider:not(:animated)").animate({left:c},500,function(){b.find("li:first").before(b.find("li:last")),b.css({left:"-"+f+"px"})})}})}$(document.body).on("click",".thumb",function(c){c.preventDefault();var e=$(this).find("a").attr("href");d.find("iframe").attr({src:"http://player.vimeo.com/video/"+a.getId(e)+"?autoplay=1"}),b.find("li").removeClass("current"),$(this).addClass("current")})}};